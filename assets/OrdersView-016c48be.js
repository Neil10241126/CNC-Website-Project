import{_ as p,o as l,b as n,e,F as o,d,t as a,n as _}from"./index-2dfcca42.js";const{VITE_URL:h,VITE_PATH:m}={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"neil-hexschool",BASE_URL:"/CNC-Website-Project/",MODE:"production",DEV:!1,PROD:!0},g={data(){return{orders:[],pages:{}}},methods:{checkAdmin(){this.$http.post(`${h}/v2/api/user/check`).then(()=>{this.getOrders()}).catch(()=>{this.$router.push("/login")})},getOrders(){this.$http.get(`${h}/v2/api/${m}/admin/orders`).then(s=>{this.orders=s.data.orders,this.pages=s.data.pagination}).catch(()=>{})}},computed:{orderDate(){let s=[];return this.orders.forEach(r=>{const i=new Date(r.create_at);s=`${i.getFullYear()}/${i.getMonth()+1}/${i.getDate()}`}),s}},mounted(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)CookieToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=s,this.checkAdmin()}},k=e("div",{class:"py-4"},[e("h2",{class:"fs-1 lh-base m-0"},"訂單列表")],-1),f={class:"table table-hover border align-middle"},$=e("thead",null,[e("tr",{class:"table-dark"},[e("th",null,"訂單編號"),e("th",null,"聯絡人"),e("th",null,"電子郵件"),e("th",null,"訂單日期"),e("th",null,"是否付款")])],-1),b={"aria-label":"Page navigation example"},x={class:"pagination justify-content-end"},E=e("li",{class:"page-item"},[e("a",{class:"page-link",href:"#","aria-label":"Previous"},[e("span",{"aria-hidden":"true"},"«")])],-1),v={class:"page-link",href:"#"},D=e("li",{class:"page-item"},[e("a",{class:"page-link",href:"#","aria-label":"Next"},[e("span",{"aria-hidden":"true"},"»")])],-1);function T(s,r,i,V,c,u){return l(),n(o,null,[k,e("table",f,[$,e("tbody",null,[(l(!0),n(o,null,d(c.orders,t=>(l(),n("tr",{key:t.id},[e("td",null,a(t.id),1),e("td",null,a(t.user.name),1),e("td",null,a(t.user.email),1),e("td",null,a(u.orderDate),1),e("td",{class:_([{"text-success":t.is_paid},{"text-danger":!t.is_paid}])},a(t.is_paid?"已付款":"未付款"),3)]))),128))])]),e("nav",b,[e("ul",x,[E,(l(!0),n(o,null,d(c.pages.total_pages,t=>(l(),n("li",{class:"page-item",key:t+1234},[e("a",v,a(t),1)]))),128)),D])])],64)}const A=p(g,[["render",T]]);export{A as default};
